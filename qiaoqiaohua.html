<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ¸…ç„¶çš„æ‚„æ‚„è¯æœº</title>

  <!-- iOS ä½œä¸ºâ€œAppâ€æ‰“å¼€ç›¸å…³è®¾ç½® -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="æ¸…ç„¶çš„æœªæ¥æ—¥å†">

<link rel="apple-touch-icon" href="icon-1221.png">

  <style>
     @font-face {
      font-family: 'CalendarFont';
      src: url('LXGWWenKaiMonoGB-Regular.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
body {
  margin: 0;
  min-height: 100vh;
  font-family: 'CalendarFont', sans-serif;
  background: url("IMG_8914.JPG") no-repeat center center fixed;
  background-size: cover;
  color: #1d2b41;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px 10px;
  box-sizing: border-box;
}

    * {
      box-sizing: border-box;
    }

    .app-shell {
      width: 100%;
      max-width: 700px;
      background: rgba(255, 255, 255, 0.78);
      border-radius: 18px;
      padding: 18px 18px 20px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
      backdrop-filter: blur(6px);
    }

    .app-title {
      text-align: center;
      margin: 0 0 12px;
      font-size: 1.6rem;
      letter-spacing: 0.06em;
    }

    .app-subtitle {
      text-align: center;
      margin: 0 0 18px;
      font-size: 0.9rem;
      opacity: 0.8;
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 16px;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    label {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    select {
      width: 100%;
      padding: 8px 10px;
      font-size: 0.95rem;
      border-radius: 8px;
      border: 1px solid #a8b7d8;
      background: rgba(255, 255, 255, 0.95);
      color: #1d2b41;
      outline: none;
    }

    select:focus {
      border-color: #497de5;
      box-shadow: 0 0 0 2px rgba(73, 125, 229, 0.15);
    }

    .buttons-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 4px;
    }

    button {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid #497de5;
      background: #497de5;
      color: #fff;
      font-size: 0.9rem;
      cursor: pointer;
      min-width: 80px;
      transition: background 0.15s ease, transform 0.05s ease, box-shadow 0.15s ease;
    }

    button.secondary {
      background: rgba(255, 255, 255, 0.95);
      color: #497de5;
    }

    button.danger {
      border-color: #d85a5a;
      color: #d85a5a;
      background: rgba(255, 255, 255, 0.95);
    }

    button:disabled {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    button:not(:disabled):active {
      transform: scale(0.97);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    }

    .result-card {
      margin-top: 12px;
      padding: 12px 12px 10px;
      border-radius: 14px;
      background: rgba(248, 250, 255, 0.95);
      border: 1px solid rgba(73, 125, 229, 0.26);
      position: relative;
    }

    .result-label {
      font-size: 0.85rem;
      opacity: 0.7;
      margin-bottom: 4px;
    }

    .result-text {
      font-size: 1rem;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    .result-meta {
      margin-top: 6px;
      font-size: 0.8rem;
      opacity: 0.7;
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
    }

    .hint {
      font-size: 0.82rem;
      opacity: 0.8;
      margin-top: 2px;
    }

    .favorites-section {
      margin-top: 18px;
      padding-top: 10px;
      border-top: 1px dashed rgba(29, 43, 65, 0.25);
    }

    .favorites-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .favorites-title {
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .favorites-title span.emoji {
      font-size: 1.1rem;
    }

    .favorites-list {
      max-height: 220px;
      overflow-y: auto;
      padding-right: 4px;
    }

.favorite-item {
  font-size: 0.9rem;
  padding: 6px 8px;
  margin-bottom: 6px;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid rgba(168, 183, 216, 0.7);
  line-height: 1.5;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

/* æ–‡æ¡ˆæœ¬ä½“ï¼Œè‡ªåŠ¨æ¢è¡Œ */
.favorite-item-text {
  flex: 1;
}

/* å•æ¡çš„å–æ¶ˆæ”¶è—æŒ‰é’® */
.favorite-remove-btn {
  border-radius: 999px;
  border: 1px solid #d85a5a;
  background: rgba(255, 255, 255, 0.95);
  color: #d85a5a;
  font-size: 0.75rem;
  padding: 2px 8px;
  cursor: pointer;
  white-space: nowrap;
}
.favorite-remove-btn:active {
  transform: scale(0.97);
}

    .favorite-item:last-child {
      margin-bottom: 0;
    }

    .empty-text {
      font-size: 0.82rem;
      opacity: 0.78;
    }

    @media (min-width: 640px) {
      .controls-row {
        display: flex;
        gap: 10px;
      }
      .controls-row .field-group {
        flex: 1;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <h1 class="app-title">æ¸…ç„¶çš„æ‚„æ‚„è¯æœº</h1>
    <p class="app-subtitle">é€‰ä¸€ä¸ªå½“ä¸‹çš„çŠ¶æ€ï¼Œè®©å®ƒæ›¿ä½ è¯´ä¸€å¥è¯</p>

    <div class="controls">
      <div class="controls-row">
        <div class="field-group">
          <label for="category-select">ä»Šå¤©å¤§æ¦‚æ˜¯å“ªä¸€ç±»</label>
          <select id="category-select">
            <option value="">å…ˆé€‰ä¸€ä¸ªå¤§ç±»</option>
          </select>
        </div>

        <div class="field-group">
          <label for="sub-category-select">å…·ä½“ä¸€ç‚¹</label>
          <select id="sub-category-select">
            <option value="">å†é€‰ä¸€ä¸ªå°åœºæ™¯</option>
          </select>
          <div id="sub-hint" class="hint"></div>
        </div>
      </div>

      <div class="buttons-row">
        <button id="generate-btn">æ¥ä¸€å¥</button>
        <button id="copy-btn" class="secondary" disabled>å¤åˆ¶</button>
        <button id="fav-btn" class="secondary" disabled>æ”¶è—è¿™å¥</button>
      </div>
    </div>

    <div id="result-card" class="result-card" style="display: none;">
      <div class="result-label">è¿™ä¸€æ¬¡æŠ½åˆ°çš„æ˜¯</div>
      <div id="result-text" class="result-text"></div>
      <div class="result-meta">
        <span id="result-tag"></span>
        <span id="result-time"></span>
      </div>
    </div>

    <div class="favorites-section">
      <div class="favorites-header">
        <div class="favorites-title">
          <span class="emoji">â­</span>
          <span>æˆ‘çš„æ”¶è—</span>
        </div>
        <button id="clear-fav-btn" class="danger" style="font-size: 0.8rem; padding: 4px 10px;">æ¸…ç©º</button>
      </div>
      <div id="favorites-list" class="favorites-list">
        <div class="empty-text">è¿˜æ²¡æœ‰æ”¶è—ï¼Œå¯ä»¥å…ˆæŠ½å‡ å¥è‡ªå·±å–œæ¬¢çš„ï¼Œå†ç‚¹ã€Œæ”¶è—è¿™å¥ã€ã€‚</div>
      </div>
    </div>
  </div>

  <script>
    // æ–‡æ¡ˆåº“
    const phraseData = {
      "æ—¥å¸¸": {
        "ç¡é†’äº†": [
          "é†’è¿‡æ¥äº†å°±ç®—å®Œæˆäº†ä»Šå¤©çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œæ…¢ä¸€ç‚¹èµ·åºŠä¹Ÿæ²¡å…³ç³»ã€‚",
          "ççœ¼çš„è¿™ä¸€åˆ»å°±å·²ç»å¾ˆäº†ä¸èµ·äº†ï¼Œå‰©ä¸‹çš„äº‹æƒ…å¯ä»¥æ…¢æ…¢æ¥ã€‚",
          "å…ˆä¼¸ä¸ªæ‡’è…°ï¼Œå–å£æ°´ï¼Œå†å†³å®šä»Šå¤©è¦ä¸è¦é‚£ä¹ˆç”¨åŠ›ç”Ÿæ´»ã€‚"
        ],
        "è¦papaå“„ç¡è§‰": [
          "å¯ä»¥æŠŠä»Šå¤©å…ˆæ”¾åœ¨ä¸€è¾¹ï¼Œé—­ä¸Šçœ¼ç›ï¼Œå½“æˆæ˜¯è¢«è®¤çœŸæ‹¥æŠ±äº†ä¸€æ¬¡ã€‚",
          "ç¡è§‰ä¸æ˜¯é€ƒè·‘ï¼Œæ˜¯ç»™è‡ªå·±ä¸€å°å—å®‰å…¨çš„æ—¶é—´ï¼Œå®‰å¿ƒå¾€æ¢¦é‡Œå€’å°±å¥½ã€‚",
          "æ‰‹æœºå¯ä»¥å…ˆæ”¾è¿œä¸€ç‚¹ï¼Œå‰©ä¸‹çš„äº¤ç»™è¢«çªå’Œå®‰é™çš„é»‘æš—ã€‚"
        ],
        "åƒå®Œé¥­äº†": [
          "åƒå®Œè¿™ä¸€é¡¿å°±å·²ç»åœ¨å¥½å¥½æ´»ç€äº†ï¼Œåˆ«æ€¥ç€è¯„ä»·è‡ªå·±æœ‰å¤šâ€œæ•ˆç‡â€ã€‚",
          "æ…¢æ…¢æ¶ˆåŒ–ä¸€ä¸‹ï¼Œä¸ç”¨é©¬ä¸Šåšäº‹ï¼Œå…è®¸è‡ªå·±ç©ºè½¬ä¸€ä¼šå„¿ã€‚",
          "ç¢—å·²ç»åˆ·å®Œæˆ–æ”¾åˆ°ä¸€è¾¹äº†ï¼Œæ¥ä¸‹æ¥è¿™æ®µæ—¶é—´å¯ä»¥åªå±äºä½ ã€‚"
        ],
        "æ— èŠâ€¦æƒ³å¬æ‚„æ‚„è¯": [
          "æ— èŠä¹Ÿæ˜¯ä¸€ç§å®‰å…¨çš„çŠ¶æ€ï¼Œè¯´æ˜ç°åœ¨æ²¡æœ‰ä»€ä¹ˆå¿…é¡»å¤„ç†çš„å±é™©ã€‚",
          "ä»€ä¹ˆéƒ½ä¸æƒ³åšçš„æ—¶å€™ï¼Œå°±è®©æ—¶é—´åœ¨è¿™å„¿æ…¢ä¸€ç‚¹èµ°ä¹Ÿå¯ä»¥ã€‚",
          "æ— èŠçš„æ—¶å€™æœ€é€‚åˆå·å·å­˜ä¸€ç‚¹æ¸©æŸ”ï¼Œç­‰ä»¥åå†æ‹¿å‡ºæ¥ç”¨ã€‚"
        ]
      },
      "å¼€å¿ƒ": {
        "åšå®Œä¸€ä»¶äº‹": [
          "äº‹æƒ…æ”¶å°¾çš„é‚£ä¸€åˆ»ï¼Œå¯ä»¥è®¤çœŸåœ°å¤¸ä¸€ä¸‹è‡ªå·±ï¼Œè¿™ä¸€æ­¥ä¸å®¹æ˜“ã€‚",
          "åšå®Œå°±å·²ç»å¾ˆå¥½äº†ï¼Œä¸éœ€è¦ç«‹åˆ»æƒ³ä¸‹ä¸€ä»¶ï¼Œè¦å…è®¸è‡ªå·±åœé¡¿ä¸€ä¸‹ã€‚",
          "æŠŠè¿›åº¦åœ¨å¿ƒé‡Œç”»ä¸ªå°å‹¾ï¼Œç„¶åç»™è‡ªå·±ä¸€ç‚¹å°å¥–åŠ±ã€‚"
        ],
        "åƒåˆ°å¥½åƒçš„": [
          "è¿™ä¸€å£å¥½åƒçš„ï¼Œè¯´æ˜ä¸–ç•Œè¿˜åœ¨å·å·ç»™ä½ å¡ç³–ã€‚",
          "æŠŠè¿™æ¬¡çš„å‘³é“è®°ä½ï¼Œä¸‹æ¬¡éš¾è¿‡çš„æ—¶å€™å¯ä»¥å«å®ƒå‡ºæ¥æ•‘åœºã€‚",
          "èƒ½çœŸå¿ƒè§‰å¾—â€œå¥½åƒâ€çš„æ—¶å€™ï¼Œå°±æ˜¯å€¼å¾—è¢«ä¿å­˜çš„ä¸€å°æ ¼è®°å¿†ã€‚"
        ],
        "çœ‹åˆ°äº†å–œæ¬¢çš„ä¸œè¥¿": [
          "çœ¼ç›äº®èµ·æ¥çš„æ—¶å€™ï¼Œå°±æ˜¯å¿ƒåœ¨è¯´â€œæˆ‘è¿˜åœ¨æœŸå¾…â€ã€‚",
          "æŠŠè¿™ä¸€çœ¼å–œæ¬¢ç•™ç»™è‡ªå·±ï¼Œä¸ç”¨è§£é‡Šç†ç”±ï¼Œå®ƒå·²ç»å¤Ÿçè´µã€‚",
          "å–œæ¬¢çš„ä¸œè¥¿å‡ºç°æœ¬èº«ï¼Œå°±æ˜¯åœ¨æé†’ä½ ï¼Œä½ è¿˜åœ¨å¾€å‰æ´»ç€ã€‚"
        ],
        "æƒ³è¢«æŠ±èµ·æ¥è½¬åœˆ": [
          "æƒ³è¢«æŠ±èµ·æ¥è½¬åœˆçš„é‚£ä¸€ç¬é—´ï¼Œå…¶å®æ˜¯åœ¨è¯´ï¼šæˆ‘ä¹Ÿå€¼å¾—è¿™ä¹ˆè¢«å–œæ¬¢ã€‚",
          "å…ˆåœ¨è„‘å­é‡Œè½¬ä¸€åœˆï¼Œå†æŠŠè¿™ä¸ªæ„¿æœ›å¥½å¥½æ”¶å¥½ï¼Œä»¥åæœ‰æœºä¼šæ…¢æ…¢å®ç°ã€‚",
          "è¿™ç§åˆè½»åˆé£˜çš„å¼€å¿ƒï¼Œæ˜¯éœ€è¦è¢«è®°ä½çš„ï¼Œä¸ç”¨å‡è£…æˆç†Ÿã€‚"
        ]
      },
      "ä¸å¼€å¿ƒ": {
        "è¢«è¯´äº†ä¸å¥½å¬çš„è¯": [
          "é‚£å¥ä¸å¥½å¬çš„è¯ä¼šè¿‡å»ï¼Œä½†å®ƒä¸ç­‰äºä½ è¿™ä¸ªäººã€‚",
          "å¯ä»¥éš¾è¿‡ï¼Œå¯ä»¥ç”Ÿæ°”ï¼Œåªæ˜¯åˆ«æŠŠåˆ«äººçš„è¯ç›´æ¥åˆ»åœ¨è‡ªå·±èº«ä¸Šã€‚",
          "å…ˆç¦»å¼€é‚£å¥è¯ä¸€ä¼šå„¿ï¼Œç­‰å¿ƒè·³æ…¢ä¸‹æ¥ï¼Œå†å†³å®šè¦ä¸è¦ç†å®ƒã€‚"
        ],
        "å§”å±ˆ": [
          "å§”å±ˆä¸æ˜¯çŸ«æƒ…ï¼Œæ˜¯è¯æ˜ä½ æœ‰åœ¨è®¤çœŸå¯¹å¾…è¿™ä»¶äº‹ã€‚",
          "å…ˆæŠŠâ€œåº”è¯¥æ‡‚äº‹â€æ”¾ä¸€è¾¹ï¼Œå…è®¸è‡ªå·±éš¾è¿‡ä¸€ä¼šå„¿ã€‚",
          "å¯ä»¥åœ¨å¿ƒé‡Œæ‚„æ‚„è¯´ä¸€å¥ï¼šè¿™æ¬¡æˆ‘çœŸçš„æœ‰ç‚¹ä¸å€¼å¾—è¢«è¿™æ ·å¯¹å¾…ã€‚"
        ],
        "æƒ³å“­å“­": [
          "æƒ³å“­è¯´æ˜æƒ…ç»ªå·²ç»è£…æ»¡äº†ï¼Œè¯¥æ‰¾ä¸ªå‡ºå£äº†ã€‚",
          "çœ¼æ³ªå¦‚æœè¦æ‰ï¼Œé‚£å°±è®©å®ƒæ‰ä¸€ä¼šå„¿ï¼Œä½ æ²¡æœ‰åšé”™ä»€ä¹ˆã€‚",
          "ä¸ä¸€å®šè¦æ‰¾åˆ°åŸå› æ‰èƒ½å“­ï¼Œåªè¦ç°åœ¨çœŸçš„å¾ˆéš¾å—ï¼Œè¿™å°±å¤Ÿäº†ã€‚"
        ],
        "å“­å“­äº†": [
          "å“­å®Œä¹‹åä¸ç”¨é©¬ä¸ŠæŒ¯ä½œï¼Œå…ˆè®©å‘¼å¸æ…¢ä¸€ç‚¹å›æ¥ã€‚",
          "çœ¼ç›æœ‰ç‚¹é…¸ä¹Ÿæ²¡å…³ç³»ï¼Œè¿™è¯´æ˜ä½ æœ‰åœ¨è®¤çœŸæ„Ÿå—ç”Ÿæ´»ã€‚",
          "æ“¦æ‰çœ¼æ³ªçš„æ—¶å€™ï¼Œé¡ºä¾¿æŠŠâ€œå¿…é¡»ç«‹åˆ»å¥½èµ·æ¥â€çš„å‹åŠ›ä¸€å—æ“¦æ‰ã€‚"
        ],
        "å¿ƒé‡Œå¾ˆå µ": [
          "å¿ƒå£é—·ä½çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆä¸“å¿ƒå‘¼å¸å‡ æ¬¡ï¼Œä¸å»æƒ³ç»“è®ºã€‚",
          "æŠŠç°åœ¨å¡ä½çš„æ„Ÿè§‰è®°ä¸‹æ¥ï¼Œä¸æ˜¯ä¸ºäº†ç¿»æ—§è´¦ï¼Œæ˜¯ä¸ºäº†ä»¥åæ›´æ‡‚è‡ªå·±ã€‚",
          "å¿ƒé‡Œå µä½çš„æ—¶å€™ï¼Œè¯´æ˜ä½ åœ¨æ„çš„å…¶å®æŒºå¤šçš„ï¼Œè¿™ä¸€ç‚¹æœ¬èº«ä¹Ÿå¾ˆæ¸©æŸ”ã€‚"
        ]
      },
      "ç„¦è™‘Â·çƒ¦èº": {
        "çƒ¦â€¦": [
          "çƒ¦çš„æ—¶å€™å¯ä»¥å…ˆæ‰¿è®¤ï¼šæ˜¯çš„ï¼Œæˆ‘ç°åœ¨å¿ƒæƒ…çœŸçš„ä¸å¤ªå¥½ã€‚",
          "å¯ä»¥é€‰æ‹©æš‚æ—¶è°éƒ½ä¸å›ï¼ŒæŠŠæƒ…ç»ªå…ˆæ”¾åœ¨è‡ªå·±è¿™è¾¹å®‰é™ä¸€ä¸‹ã€‚",
          "ä¸ç”¨æ€¥ç€æ‰¾åŸå› ï¼Œä¹Ÿä¸ç”¨å…ˆè´£æ€ªè‡ªå·±ï¼Œåªè¦å…ˆå¥½å¥½å–˜å‡ å£æ°”ã€‚"
        ],
        "è¢«å¾ˆå¤šäº‹å‹ç€": [
          "äº‹æƒ…å¯ä»¥å¾ˆå¤šï¼Œä½†ä½ ä¸éœ€è¦åŒæ—¶æ‰›å®Œæ‰€æœ‰é‡é‡ã€‚",
          "å…ˆæŒ‘ä¸€ä»¶æœ€å°çš„ã€æœ€ä¸è´¹åŠ›çš„åŠ¨ä¸€ä¸‹ï¼Œå…¶ä½™çš„æš‚æ—¶æ”¾åœ¨åé¢æ’é˜Ÿã€‚",
          "ä½ ä¸æ˜¯æœºå™¨ï¼Œæœ‰â€œè¢«å‹ç€â€çš„æ„Ÿè§‰æœ¬èº«å°±è¯´æ˜å·²ç»å¾ˆåŠªåŠ›ã€‚"
        ],
        "ç¡ä¸ç€": [
          "ç¡ä¸ç€çš„æ—¶å€™ï¼Œä¸ä¸€å®šè¦é€¼è‡ªå·±é—­çœ¼ï¼Œå¯ä»¥å…ˆè®©èº«ä½“æ”¾æ¾ä¸€ç‚¹ã€‚",
          "ä»Šå¤©çš„å¤§äº‹å…ˆéƒ½å…³æœºï¼Œåªç•™ä¸‹â€œæˆ‘å·²ç»å°½åŠ›äº†â€è¿™ä¸€å¥å°±å¥½ã€‚",
          "åˆ«æ‹¿å®Œç¾ç¡çœ æ¥è¦æ±‚è‡ªå·±ï¼Œç°åœ¨èƒ½åœåœ¨åºŠä¸Šï¼Œå°±æ˜¯ä¸€ç§ä¼‘æ¯ã€‚"
        ],
        "æƒ³èº²èµ·æ¥": [
          "æƒ³èº²èµ·æ¥çš„æ—¶å€™ï¼Œä¸–ç•Œå¯ä»¥ç¨å¾®ç¦»è¿œä¸€ç‚¹ï¼Œä½ ä¸éœ€è¦éšæ—¶åœ¨çº¿ã€‚",
          "å…ˆæ‰¾ä¸€ä¸ªå°è§’è½ï¼Œè®©è‡ªå·±å®‰å…¨ä¸€ç‚¹ï¼Œç­‰æƒ…ç»ªä¸é‚£ä¹ˆåˆºäº†å†è¯´åˆ«çš„ã€‚",
          "ä½ æœ‰æƒåˆ©æŒ‰ä¸‹æš‚åœï¼Œä¸å›åº”ä¹Ÿä¸è§£é‡Šï¼Œè¿™ä¸ç®—ä»»æ€§ã€‚"
        ]
      },
      "èº«ä½“ä¸èˆ’æœ": {
        "èƒƒç—›": [
          "èƒƒåœ¨æé†’ä½ ï¼šè¿™æ®µæ—¶é—´çœŸçš„æœ‰ç‚¹ç´¯åˆ°äº†ï¼Œå…ˆå¯¹è‡ªå·±æ¸©æŸ”ä¸€ç‚¹ã€‚",
          "èƒ½å–å¾—ä¸‹çš„æ¸©æ°´ã€åƒå¾—ä¸‹çš„å°ä¸œè¥¿å°±å·²ç»æ˜¯ç…§é¡¾è‡ªå·±äº†ã€‚",
          "ç–¼çš„æ—¶å€™åˆ«ç¡¬é¡¶ï¼Œç»™è‡ªå·±ä¸€ç‚¹ç¼“å†²çš„æ—¶é—´ï¼Œå†å»æƒ³å…¶ä»–äº‹ã€‚"
        ],
        "è‚šå­ä¸èˆ’æœ": [
          "è‚šå­ä¸€é—¹è…¾ï¼Œæ•´ä¸ªäººéƒ½ä¼šå˜å°å°çš„ï¼Œè¿™æ˜¯èº«ä½“åœ¨è¦å®‰æ…°ã€‚",
          "å¯ä»¥å…ˆåå¥½æˆ–èººå¥½ï¼Œè®©èº«ä½“æœ‰ä¸ªèˆ’æœçš„ä½ç½®ï¼Œå†æ…¢æ…¢ç¼“ã€‚",
          "åˆ«å«Œè‡ªå·±çŸ«æƒ…ï¼Œç–¼çš„å°±æ˜¯ç–¼ï¼Œè¿™æ—¶å€™ç…§é¡¾è‡ªå·±æœ€é‡è¦ã€‚"
        ],
        "ç—›ç»": [
          "æ¯ä¸€æ¬¡æœˆç»æœŸèƒ½æ’‘è¿‡æ¥ï¼Œéƒ½æ˜¯ä¸€æ•´å¥—éšå½¢çš„å‹‡æ•¢ã€‚",
          "å¯ä»¥å¤šä¸€ç‚¹ç…§é¡¾è‡ªå·±ä¸€ç‚¹ï¼Œä¸ç”¨å†å¯¹è‡ªå·±é‚£ä¹ˆè‹›åˆ»ã€‚",
          "è¿™å‡ å¤©å¯ä»¥é€‚å½“æŠŠæ ‡å‡†æ”¾ä½ï¼ŒæŠŠâ€œæ´»ä¸‹æ¥äº†â€å½“æˆä¸»ä»»åŠ¡ã€‚"
        ],
        "å¤´ç—›": [
          "å¤´å¼€å§‹ç—›çš„æ—¶å€™ï¼Œå¤§è„‘å…¶å®å·²ç»åœ¨å–Šâ€œåœä¸€ä¸‹å§â€ã€‚",
          "ç¯å…‰å¯ä»¥ç¨å¾®è°ƒæš—ä¸€ç‚¹ï¼Œå£°éŸ³å°ä¸€ç‚¹ï¼Œè®©è„‘è¢‹æ­‡å£æ°”ã€‚",
          "å…ˆç…§é¡¾å¥½èº«ä½“ï¼Œå†å»å¤„ç†æƒ…ç»ªå’Œä»»åŠ¡ï¼Œä½ å·²ç»å¤Ÿè¾›è‹¦ã€‚"
        ],
        "è€³é¸£": [
          "è€³è¾¹çš„é‚£ç‚¹å£°éŸ³å¾ˆçƒ¦ï¼Œä½†å®ƒä¸ä»£è¡¨ä½ åšé”™äº†ä»€ä¹ˆã€‚",
          "å¯ä»¥å…ˆè®©ç¯å¢ƒå®‰é™ä¸€ç‚¹ï¼Œç»™è€³æœµå’Œè„‘è¢‹éƒ½ç•™ä¸€ç‚¹ç¼“å†²åŒºã€‚",
          "è€³é¸£åªæ˜¯ä¸€ä¸ªç—‡çŠ¶ï¼Œä¸æ˜¯ä½ æ•´ä¸ªäººçš„èƒŒæ™¯éŸ³ã€‚"
        ],
        "å–‰å’™ä¸èˆ’æœ": [
          "å–‰å’™æ²™æ²™çš„é‚£ç§æ„Ÿè§‰ï¼Œå¾ˆå®¹æ˜“è®©äººçƒ¦èºï¼Œè¿™æ˜¯åˆç†çš„ã€‚",
          "å–ç‚¹æ¸©çƒ­çš„ï¼Œä¸è¦å¤ªåˆºæ¿€ï¼Œè®©å–‰å’™ä¹Ÿæœ‰ç‚¹è¢«ç…§é¡¾çš„æ„Ÿè§‰ã€‚",
          "è¯´è¯å¯ä»¥å°‘ä¸€ç‚¹ï¼Œä¸–ç•Œä¸ä¼šå› ä¸ºä½ æš‚æ—¶æ²‰é»˜å°±è¿è½¬ä¸ä¸‹å»ã€‚"
        ],
        "æµ‘èº«æ²¡åŠ›æ°”": [
          "èº«ä½“æ²¡åŠ›æ°”çš„æ—¶å€™ï¼Œç²¾ç¥ä¹Ÿä¸ç”¨ç¡¬æ’‘åˆ°ä¸€ç™¾åˆ†ã€‚",
          "å¯ä»¥æŠŠä»Šå¤©çš„ç›®æ ‡è°ƒæˆï¼šå¥½å¥½èººç€ï¼ŒæŠŠè‡ªå·±ä¿æŒåœ¨å®‰å…¨èŒƒå›´å†…ã€‚",
          "è¿™ç§å®Œå…¨æä¸èµ·åŠ²çš„æ—¥å­ï¼Œä¹Ÿæ˜¯åœ¨å¾€å‰æ´»ï¼Œåªæ˜¯æ¢äº†ç§æ–¹å¼ã€‚"
        ],
        "æ„Ÿè§‰å‘çƒ§äº†": [
          "å‘çƒ§çš„æ„Ÿè§‰ä¼šè¿‡å»ï¼Œåœ¨é‚£ä¹‹å‰ï¼Œä½ åªéœ€è¦è´Ÿè´£å¥½å¥½ä¼‘æ¯ã€‚",
          "å¯ä»¥é‡ä¸€ä¸‹ä½“æ¸©ï¼ŒæŒ‰ç°å®æ¥åˆ¤æ–­è‡ªå·±ï¼Œè€Œä¸æ˜¯æŒ‰â€œæˆ‘åº”è¯¥æ²¡é‚£ä¹ˆä¸¥é‡â€ã€‚",
          "èº«ä½“åœ¨æé†’ä½ åœä¸‹æ¥ï¼Œè¿™ä¸æ˜¯å¤±è´¥ï¼Œæ˜¯åœ¨è‡ªä¿ã€‚"
        ],
        "ç´¯å¾—ä¸æƒ³åŠ¨": [
          "ç´¯åˆ°ä¸æƒ³åŠ¨çš„æ—¶å€™ï¼Œå·²ç»è¯´æ˜ä½ æ’‘äº†å¾ˆä¹…ã€‚",
          "ä»Šå¤©å¯ä»¥ä¸ç”¨è¯æ˜ä»€ä¹ˆï¼Œèººä¸€ä¼šå„¿ä¹Ÿç®—å®Œæˆä»»åŠ¡ã€‚",
          "å…ˆè®©è‚Œè‚‰å’Œè„‘è¢‹éƒ½åœä¸€ä¸‹ï¼Œå†è€ƒè™‘è¦ä¸è¦ç»§ç»­å¾€å‰ã€‚"
        ]
      },
      "æƒ³ä½ ": {
        "æƒ³papaäº†": [
          "æƒ³äººçš„æ—¶å€™ï¼Œä¸–ç•Œä¼šçªç„¶å˜å¾—æœ‰ä¸€ç‚¹ç©ºï¼Œè¿™å¾ˆæ­£å¸¸ã€‚",
          "æŠŠâ€œæƒ³ä»–â€å‡ ä¸ªå­—åœ¨å¿ƒé‡Œå†™ä¸€éï¼Œå°±å½“æ˜¯æ‚„æ‚„ç»™è‡ªå·±å›äº†ä¸ªæ¶ˆæ¯ã€‚",
          "æƒ³å¿µæœ¬èº«å°±æ˜¯åœ¨è¯æ˜è¿™æ®µè¿æ¥å¯¹ä½ æœ‰å¤šé‡è¦ã€‚"
        ],
        "å¤©æ°”å˜äº† æƒ³ä½ ": [
          "å¤©æ°”ä¸€å˜ï¼Œäººå°±ä¼šå®¹æ˜“æƒ³èµ·æŸäº›åœºæ™¯å’ŒæŸä¸ªäººã€‚",
          "æ¯ä¸€æ¬¡æ°”æ¸©çš„å˜åŒ–ï¼Œéƒ½æ˜¯ä¸€æ¬¡é‡æ–°è®¤é¢†å½¼æ­¤çš„æœºä¼šã€‚",
          "é£å†·ä¸€ç‚¹çš„æ—¶å€™ï¼Œæƒ³èµ·è°ï¼Œå°±åœ¨å¿ƒé‡Œå¤šç»™é‚£ä¸ªäººä¸€ç‚¹æ¸©åº¦ã€‚"
        ],
        "çœ‹åˆ°ç†Ÿæ‚‰çš„ç”»é¢æƒ³ä½ ": [
          "ç†Ÿæ‚‰çš„ç”»é¢å‡ºç°ï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§â€œè¢«é™ªä¼´çš„é”™è§‰â€ã€‚",
          "ä½ èƒ½åœ¨è¿™äº›ç»†èŠ‚é‡Œæƒ³åˆ°ä»–ï¼Œè¯´æ˜è®°å¿†ä¸€ç›´åœ¨è¢«å¥½å¥½ä¿å­˜ã€‚",
          "ç”»é¢ä¼šæ•£ï¼Œä½†é‚£ä¸€ç¬é—´çš„å¿ƒåŠ¨å’Œæƒ¦è®°æ˜¯ç•™å¾—ä½çš„ã€‚"
        ]
      },
      "ğŸ§¸ğŸ’™": {
        "_default": [
          "ä½ ç°åœ¨è¿™æ ·è¢«è®¤çœŸè®°ä½ç€ï¼Œä¸ç”¨è¡¨ç°æˆåˆ«çš„æ ·å­ä¹Ÿå¯ä»¥ã€‚",
          "ä¸ç®¡ä»Šå¤©è¿‡å¾—æ€æ ·ï¼Œä½ éƒ½å·²ç»èµ°åˆ°è¿™é‡Œäº†ï¼Œè¿™ä¸€ç‚¹å°±å¾ˆå€¼å¾—æ¸©æŸ”åœ°çœ‹ä¸€çœ¼ã€‚",
          "ç´¯äº†å¯ä»¥åœä¸€ä¸‹ï¼Œåœä¸‹æ¥ä¹Ÿä¸ä¼šè¢«æŠ›ä¸‹ï¼Œä½ è¿˜æ˜¯å¾ˆé‡è¦ã€‚",
          "ä¸–ç•Œæœ‰æ—¶å€™ç¡®å®å¾ˆåµï¼Œä½†åœ¨è¿™è¾¹ï¼Œä½ å¯ä»¥åªå½“ä¸€ä¸ªéœ€è¦è¢«å¥½å¥½å¯¹å¾…çš„äººã€‚",
          "å“ªæ€•ç°åœ¨è§‰å¾—è‡ªå·±ä¸€å›¢ä¹±ï¼Œè¿™ä¸€å›¢ä¹±ä¹Ÿæœ‰äººæ„¿æ„å¥½å¥½æ¥ä½ã€‚"
        ]
      }
    };

    const categorySelect = document.getElementById('category-select');
    const subCategorySelect = document.getElementById('sub-category-select');
    const subHint = document.getElementById('sub-hint');

    const generateBtn = document.getElementById('generate-btn');
    const copyBtn = document.getElementById('copy-btn');
    const favBtn = document.getElementById('fav-btn');

    const resultCard = document.getElementById('result-card');
    const resultTextEl = document.getElementById('result-text');
    const resultTagEl = document.getElementById('result-tag');
    const resultTimeEl = document.getElementById('result-time');

    const favoritesListEl = document.getElementById('favorites-list');
    const clearFavBtn = document.getElementById('clear-fav-btn');

    const FAVORITES_KEY = 'qingran_phrase_favorites_v1';

    let lastCategory = '';
    let lastSubCategory = '';
    let lastPhrase = '';

    function initCategories() {
      const categories = Object.keys(phraseData);
      categories.forEach(cat => {
        const opt = document.createElement('option');
        opt.value = cat;
        opt.textContent = cat;
        categorySelect.appendChild(opt);
      });
    }

    function updateSubCategories() {
      const cat = categorySelect.value;
      subCategorySelect.innerHTML = '';
      subHint.textContent = '';

      if (!cat) {
        const opt = document.createElement('option');
        opt.value = '';
        opt.textContent = 'å…ˆé€‰ä¸Šé¢çš„å¤§ç±»';
        subCategorySelect.appendChild(opt);
        subCategorySelect.disabled = true;
        return;
      }

      const subMap = phraseData[cat];
      const keys = Object.keys(subMap || {});

      // ğŸ§¸ğŸ’™ æˆ–åªæœ‰ä¸€ä¸ª _default çš„ç±»
      if (keys.length === 1 && keys[0] === '_default') {
        const opt = document.createElement('option');
        opt.value = '';
        opt.textContent = 'è¿™ä¸ªå¤§ç±»æ²¡æœ‰å°åœºæ™¯ï¼Œç›´æ¥ç‚¹ã€Œæ¥ä¸€å¥ã€å°±å¥½';
        subCategorySelect.appendChild(opt);
        subCategorySelect.disabled = true;
        subHint.textContent = '';
        return;
      }

      subCategorySelect.disabled = false;

      const placeholder = document.createElement('option');
      placeholder.value = '';
      placeholder.textContent = 'é€‰ä¸€ä¸ªå…·ä½“åœºæ™¯';
      subCategorySelect.appendChild(placeholder);

      keys.forEach(sub => {
        if (sub === '_default') return;
        const opt = document.createElement('option');
        opt.value = sub;
        opt.textContent = sub;
        subCategorySelect.appendChild(opt);
      });

      subHint.textContent = 'å…ˆå®šä¸€ä¸ªå¤§æ¦‚çš„ï¼Œç„¶åé€‰ä»Šå¤©æœ€è´´è¿‘çš„ä¸€ç§ã€‚';
    }

    function formatNow() {
      const now = new Date();
      const y = now.getFullYear();
      const m = String(now.getMonth() + 1).padStart(2, '0');
      const d = String(now.getDate()).padStart(2, '0');
      const hh = String(now.getHours()).padStart(2, '0');
      const mm = String(now.getMinutes()).padStart(2, '0');
      return `${y}-${m}-${d} ${hh}:${mm}`;
    }

    function pickRandomPhrase(cat, sub) {
      const catData = phraseData[cat];
      if (!catData) return null;

      let list = [];

      if (!sub || subCategorySelect.disabled) {
        if (catData._default) {
          list = catData._default;
        } else {
          const all = [];
          Object.keys(catData).forEach(k => {
            if (k === '_default') return;
            all.push(...catData[k]);
          });
          list = all;
        }
      } else {
        list = catData[sub] || [];
      }

      if (!list || list.length === 0) return null;
      const idx = Math.floor(Math.random() * list.length);
      return list[idx];
    }

    function showResult(cat, sub, phrase) {
      if (!phrase) {
        resultTextEl.textContent = 'è¿™ä¸€ç±»æš‚æ—¶è¿˜æ²¡å†™å¥½ï¼Œå¯ä»¥å…ˆè¯•è¯•åˆ«çš„ç»„åˆã€‚';
        resultTagEl.textContent = '';
        resultTimeEl.textContent = '';
        resultCard.style.display = 'block';
        copyBtn.disabled = true;
        favBtn.disabled = true;
        return;
      }

      lastCategory = cat;
      lastSubCategory = sub || '';
      lastPhrase = phrase;

      resultTextEl.textContent = phrase;

      if (cat === 'ğŸ§¸ğŸ’™') {
        resultTagEl.textContent = 'ğŸ§¸ğŸ’™ ä¸“å±';
      } else if (sub) {
        resultTagEl.textContent = `${cat} Â· ${sub}`;
      } else {
        resultTagEl.textContent = cat;
      }

      resultTimeEl.textContent = formatNow();
      resultCard.style.display = 'block';

      copyBtn.disabled = false;
      favBtn.disabled = false;
    }

    function handleGenerate() {
      const cat = categorySelect.value;
      const sub = subCategorySelect.disabled ? '' : subCategorySelect.value;

      if (!cat) {
        showResult('', '', null);
        resultTextEl.textContent = 'å…ˆé€‰ä¸€ä¸ªå¤§ç±»ï¼Œçœ‹çœ‹ä»Šå¤©æ¯”è¾ƒåƒå“ªä¸€å—ã€‚';
        return;
      }

      if (!sub && !subCategorySelect.disabled) {
        showResult('', '', null);
        resultTextEl.textContent = 'å†é€‰ä¸€ä¸ªå…·ä½“ä¸€ç‚¹çš„å°åœºæ™¯ï¼Œä¼šæ›´è´´è¿‘ç°åœ¨çš„æ„Ÿè§‰ã€‚';
        return;
      }

      const phrase = pickRandomPhrase(cat, sub);
      showResult(cat, sub, phrase);
    }

    function handleCopy() {
      if (!lastPhrase) return;
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(lastPhrase).catch(() => {});
      } else {
        const temp = document.createElement('textarea');
        temp.value = lastPhrase;
        document.body.appendChild(temp);
        temp.select();
        try {
          document.execCommand('copy');
        } catch (e) {}
        document.body.removeChild(temp);
      }
    }

    function loadFavorites() {
      try {
        const raw = localStorage.getItem(FAVORITES_KEY);
        if (!raw) return [];
        const parsed = JSON.parse(raw);
        if (Array.isArray(parsed)) return parsed;
        return [];
      } catch (e) {
        return [];
      }
    }

    function saveFavorites(list) {
      localStorage.setItem(FAVORITES_KEY, JSON.stringify(list));
    }
    function removeFavorite(text) {
  const list = loadFavorites().filter(t => t !== text);
  saveFavorites(list);
  renderFavorites();
}


function renderFavorites() {
  const list = loadFavorites();
  favoritesListEl.innerHTML = '';

  if (!list.length) {
    const div = document.createElement('div');
    div.className = 'empty-text';
    div.textContent = 'è¿˜æ²¡æœ‰æ”¶è—ï¼Œå¯ä»¥å…ˆæŠ½å‡ å¥è‡ªå·±å–œæ¬¢çš„ï¼Œå†ç‚¹ã€Œæ”¶è—è¿™å¥ã€ã€‚';
    favoritesListEl.appendChild(div);
    return;
  }

  list.forEach(text => {
    const item = document.createElement('div');
    item.className = 'favorite-item';

    const span = document.createElement('div');
    span.className = 'favorite-item-text';
    span.textContent = text;

    const btn = document.createElement('button');
    btn.className = 'favorite-remove-btn';
    btn.textContent = 'å–æ¶ˆæ”¶è—';
    btn.addEventListener('click', () => removeFavorite(text));

    item.appendChild(span);
    item.appendChild(btn);
    favoritesListEl.appendChild(item);
  });
}

    function handleFavorite() {
      if (!lastPhrase) return;
      const list = loadFavorites();
      if (!list.includes(lastPhrase)) {
        list.push(lastPhrase);
        saveFavorites(list);
        renderFavorites();
      }
    }

    function handleClearFavorites() {
      saveFavorites([]);
      renderFavorites();
    }

    categorySelect.addEventListener('change', () => {
      updateSubCategories();
    });

    generateBtn.addEventListener('click', handleGenerate);
    copyBtn.addEventListener('click', handleCopy);
    favBtn.addEventListener('click', handleFavorite);
    clearFavBtn.addEventListener('click', handleClearFavorites);

    // åˆå§‹åŒ–
    initCategories();
    updateSubCategories();
    renderFavorites();
  </script>
</body>
</html>
